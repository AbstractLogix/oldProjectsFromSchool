/* 
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */

/* global mainApp */

mainApp.controller('MiEmbarqueController', function($scope) {

});
         
mainApp.controller('TableEmbarque', function($scope,$sessionStorage) {
        
        $scope.Piezas = 0;
        $scope.Ctf = 0;
        $scope.Peso = 0;
        $scope.PesoV = 0;
        
        var myData =[
        {
        
        }];
        
    
        var myData2;
        
        $scope.gridOptions = {
            
            //Definimos Headears
            columnDefs : [
                {name:'Documento', minWidth: 70, width: 110},
                {name:'Ruta',  minWidth: 70, width: 50},
                {name:'Orig',  minWidth: 70, width: 50}, 
                {name: 'Dest',  minWidth: 70, width: 60},
                {name: 'Pzs',  minWidth: 70, width: 40},
                {name: 'Peso',  minWidth: 70, width: 50},
                {name: 'Eta',  minWidth: 70, width: 60}
            ],
            
            //DEfinimos data
            data: myData
        }; 
        
         $scope.gridOptions2 = {
            
            //Definimos Headears
            columnDefs : [
                {name:'Wrh Id', minWidth: 70, width: 80},
                {name:'Orden de Compra',  minWidth: 70, width: 100},
                {name:'-----',  minWidth: 70, width: 60} 
            ],
            
            //DEfinimos data
            data: myData2
        };  
        
        //Pasamos los datos por el WebServicie
            $scope.gridOptions.data.splice(0,1); 
            for(i = 0 ; i<$sessionStorage.Ldocumentos.length ; i++)
            {
             //Sumamos los Valores de la Tabla
             $scope.Piezas = $scope.Piezas + parseInt($sessionStorage.Ldocumentos[i].pieces);
             $scope.Ctf = $scope.Ctf + parseInt($sessionStorage.Ldocumentos[i].cft);
             $scope.Peso = $scope.Peso + parseInt($sessionStorage.Ldocumentos[i].weight);
             $scope.PesoV = $scope.PesoV + parseInt($sessionStorage.Ldocumentos[i].volWeight);
             
             //LLenamos la Tabla con sus Valores
             $scope.gridOptions.data.push({
                'Documento':$sessionStorage.Ldocumentos[i].documentNo,
                'Ruta': $sessionStorage.Ldocumentos[i].routingId,
                'Orig':$sessionStorage.Ldocumentos[i].origenCityCode,
                'Dest':$sessionStorage.Ldocumentos[i].destinationCityCode,
                'Pzs':$sessionStorage.Ldocumentos[i].totalPieces,
                'Peso':$sessionStorage.Ldocumentos[i].totalWeight,
                'Eta': "---"            
              });          
            }
});
